function changeQty(id, delta) {
  if (cart[id]) {
    cart[id].quantity += delta;
    
    // Si la cantidad baja de 1, eliminamos el producto autom√°ticamente
    if (cart[id].quantity <= 0) {
      delete cart[id];
    }
    updateUI();
  }
}

function updateUI() {
  const container = document.getElementById('cart-items');
  const countLabel = document.getElementById('cart-count');
  const totalLabel = document.getElementById('cart-total');
  
  container.innerHTML = '';
  let total = 0;
  let itemsCount = 0;

  Object.keys(cart).forEach(id => {
    const item = cart[id];
    total += item.price * item.quantity;
    itemsCount += item.quantity;

    container.innerHTML += `
      <div class="cart-item">
        <div class="cart-item-info">
          <strong>${item.name}</strong>
          <span>${item.price * item.quantity}‚Ç¨</span>
        </div>
        <div class="cart-qty-controls">
          <button class="qty-btn" onclick="changeQty('${id}', -1)">-</button>
          <span style="font-weight:600; min-width:20px; text-align:center;">${item.quantity}</span>
          <button class="qty-btn" onclick="changeQty('${id}', 1)">+</button>
        </div>
        <button class="delete-btn" onclick="removeItem('${id}')" title="Eliminar">üóëÔ∏è</button>
      </div>
    `;
  });

  countLabel.innerText = itemsCount;
  totalLabel.innerText = total;
  
  if (itemsCount === 0) {
    container.innerHTML = '<p style="text-align:center; color:#888; margin-top:30px;">Tu carrito est√° esperando caf√©...</p>';
  }
}
